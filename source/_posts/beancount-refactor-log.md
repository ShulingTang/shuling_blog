---
title: 我在 beancount-refactor 频道做了一次账单重构实战
date: 2026-02-26 09:20:00
tags:
  - 博客
categories:
  - 教程
---

这篇文章来自我在 Discord 频道 `beancount-refactor` 的一次完整实战记录。不是“写个想法”，而是从需求拆解、代码重构、真实账单验证，到规则收敛和上线复盘的一条龙。

## 这次重构，真正难的是什么

表面看是“导入账单”，本质是三件事同时成立：

- 不能漏记交易
- 不能误去重（特别是同日同商家同金额）
- 不能让 AI 凭空造账户

## 我学到的三件事

1. 正确性优先于智能感。
2. 规则是 AI 的护栏。
3. 用户反馈是最高价值测试用例。

真正好用的助手，不是会说，而是能把复杂流程稳定落地，并知道哪里该自动、哪里该停下来让人确认。
